<h:form id="menuForm" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<h:panelGrid columns="3" style="margin-top: 5px; align-items:center;">
		<h:column>
			<a
				href="/#{menuController.appName}/#{menuController.path}/paginas/principal.xhtml">
				<img id="imgLogo" width="220px"
				style="margin-left: 20px; margin-right: 20px; margin-top: 10px;"
				src="/#{menuController.appName}/#{menuController.path}/tema/img/logo.png" />
			</a>
		</h:column>

		<h:column style="position: relative;">
			<!-- Botão toggle visível somente no mobile -->
			<!-- Botão toggle posicionado no canto direito -->
			<div class="toggle-wrapper">
				<p:commandButton icon="pi pi-bars" type="button"
					onclick="PF('sidebar1').show()" styleClass="mr-2 mobile-toggle-btn" />

				<p:sidebar widgetVar="sidebar1" position="left"
					style="width: 300px;" modal="false" appendTo="@(body)">

					<h:column>
						<a
							href="/#{menuController.appName}/#{menuController.path}/paginas/principal.xhtml">
							<img id="imgLogo" width="220px"
							style="margin: 10px 20px 20px 20px;"
							src="/#{menuController.appName}/#{menuController.path}/tema/img/logo.png" />
						</a>
					</h:column>

					<h:form style="width: 100%;">
						<p:panelMenu model="#{menuController.menu}" style="width: 100%;" />
						<p:panelMenu model="#{menuController.menuUsuario}"
							style="width: 100%;" />
					</h:form>
				</p:sidebar>
			</div>

			<!-- Menu desktop sempre visível -->
			<div class="desktop-menu"
				style="margin-top: 5px; display: flex; align-items: center; justify-content: space-between; width: 100%;">
				<p:menubar model="#{menuController.menu}" />
				<p:menubar model="#{menuController.menuUsuario}" />
			</div>

			<!-- Menu mobile toggle -->
			<h:panelGroup id="menuMobile" layout="block" styleClass="mobile-menu"
				rendered="#{menuController.painelVisivel}">
				<p:menubar model="#{menuController.menu}" />
			</h:panelGroup>

		</h:column>
	</h:panelGrid>

	<style>
/* Esconde o botão toggle no desktop */
.mobile-toggle-btn {
	display: none;
	background-color: white;
}

/* Menu mobile inicialmente oculto */
.mobile-menu {
	display: none;
}

/* Exibe o menu mobile quando o painel está visível */
#menuForm\\:menuMobile {
	display: block !important;
	position: absolute;
	background-color: white;
	width: 100%;
	top: 50px;
	left: 0;
	z-index: 9999;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

/* Responsividade - exibe toggle no mobile e esconde menu desktop */
@media ( max-width : 768px) {
	.mobile-toggle-btn {
		display: inline-block !important;
	}
	.desktop-menu {
		display: none !important;
	}

	/* Ajusta alinhamento do logo para mobile */
	#imgLogo {
		width: 150px !important;
		margin-left: 10px !important;
		margin-right: 10px !important;
	}
}

.toggle-wrapper {
	position: absolute;
	right: 10px;
	top: 10px;
	padding: 5px;
	z-index: 1000;
}

#menuForm\\:btnToggleMenu_menu {
	background-color: #fff !important;
	border: 1px solid #ccc !important;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	opacity: 1 !important;
}

/* Muda o fundo da sidebar para preto */
.ui-sidebar {
	background-color: #222 !important;
	color: #ffffff !important; /* texto branco */
}

/* Ajusta o título do sidebar */
.ui-sidebar h3 {
	color: #ffffff !important;
}

/* Ajusta os itens do menu dentro do sidebar */
.ui-sidebar .ui-menuitem-link {
	color: #ffffff !important;
}

/* Muda o hover dos itens do menu */
.ui-sidebar .ui-menuitem-link:hover {
	background-color: #333333 !important;
	color: #ffffff !important;
}

body .mobile-toggle-btn {
	background-color: #005e9f !important;
	/*border: 1px solid rgb(255, 255, 255) !important;*/
	font-size: 14px !important;
	margin: 0 0.1em 0 0 !important;
	outline: none !important;
	color: white !important;
}
/* Remove a camada de overlay que bloqueia o clique no mobile */
.ui-sidebar-mask {
	display: none !important;
	pointer-events: none !important;
}

/* Ajusta o z-index para o sidebar ficar na frente, mas sem bloquear o resto */
.ui-sidebar {
	z-index: 1100 !important;
}

/* Garante que o conteúdo do sidebar receba cliques normalmente */
.ui-sidebar-content {
	pointer-events: auto !important;
}

/* Estilização opcional para o botão, pra ficar visível e no topo */
.mobile-toggle-btn {
	z-index: 1200;
	position: relative;
}
/* Força o submenu a abrir do lado direito do item pai */
.ui-tieredmenu-root .ui-menu-child {
	top: 0 !important;
	left: 100% !important;
	margin-left: 0 !important;
}

/* Se quiser garantir que o submenu fique visível e alinhado verticalmente */
.ui-menu-child {
	position: absolute !important;
	z-index: 1200 !important;
}

/* Para evitar que o submenu fique “por cima” do primeiro item */
.ui-tieredmenu-root .ui-menuitem {
	position: relative; /* cria contexto para o submenu */
}
</style>
</h:form>
